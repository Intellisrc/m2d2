{"version":3,"sources":["m2d2.ws.src.js"],"names":["m2d2","load","$","ws","request","msg","this","webSocket","send","isObject","JSON","stringify","e","onerror","getSocket","onMessage","onOpen","onClose","WebSocket","url","onopen","onclose","onmessage","res","data","parse","err","console","error","message","wsk","readyState","close","connect","options","initRequest","onConnect","connected","onDisconnect","disconnected","reconnect","host","window","location","hostname","secure","port","path","replace","args","Object","assign","protocol","hostPort","uriPath","queryStr","URLSearchParams","toString","interval","setInterval","log","clearInterval","ignore","disconnect"],"mappings":"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","file":"m2d2.ws.min.js","sourcesContent":["m2d2.load((t=>{t.ws=new class{request(e){if(e)try{this.webSocket.send(t.isObject(e)?JSON.stringify(e):e)}catch(t){this.webSocket.onerror(t)}}getSocket(t,e,s){const n=new WebSocket(this.url);return n.onopen=e,n.onclose=s,n.onmessage=e=>{if(e.data)try{t(JSON.parse(e.data))}catch(t){n.onerror(t)}},n.onerror=t=>{console.error(\"Socket encountered error: \",t?t.message:\"Unknown\",\"Closing socket\");const e=n||this;1===e.readyState&&e.close()},n}connect(t,e){this.initRequest=t.request||null,this.onConnect=t.connected||(()=>{}),this.onDisconnect=t.disconnected||(()=>{}),this.reconnect=!1!==t.reconnect,this.host=t.host||window.location.hostname,this.secure=!0===t.secure,this.port=t.port||(this.secure?443:80),this.path=\"/\"+(t.path?t.path.replace(/^\\//,\"\"):\"\"),this.args=Object.assign({},t.args);const s=\"ws\"+(this.secure?\"s\":\"\")+\"://\",n=this.host+\":\"+this.port,o=this.path,c=this.args?\"?\"+new URLSearchParams(this.args).toString():\"\";this.url=s+n+o+c,this.connected=!1,this.interval=null;const i=t=>{this.connected=!0,this.request(this.initRequest),this.onConnect()},r=t=>{this.connected=!1,this.onDisconnect(),!this.interval&&this.reconnect&&(this.interval=setInterval((()=>{if(this.connected)console.log(\"Reconnected...\"),clearInterval(this.interval);else try{this.webSocket.close(),console.log(\"Reconnecting...\"),this.webSocket=this.getSocket(e,i,r)}catch(t){}}),2e3))};this.webSocket=this.getSocket(e,i,r)}disconnect(){this.reconnect=!1,this.webSocket.close()}}}));"]}