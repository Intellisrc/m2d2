m2d2.load(t=>{function e(e){t("#m2d2-alert .m2d2-alert-front").css.add("vanish"),setTimeout(()=>{t("#m2d2-alert").remove(),e&&e()},400)}function a(t){let e=[];switch(t){case"question":e=["fa","fa-question-circle"];break;case"info":e=["fa","fa-exclamation-circle"];break;case"error":e=["fa","fa-exclamation-triangle"];break;case"ok":e=["fa","fa-check"];break;case"input":e=["fa","fa-edit"];break;case"wait":e=["fa","fa-cog","fa-spin"]}return e}t.message=function(c){if(c&&(t.isFunction(c.callback)||(c.callback&&!c.text&&(c.text=c.callback),c.callback=()=>{}),c.text||(c.text="")),t("body",{m2d2Alert:{tagName:"div",id:"m2d2-alert",back:{tagName:"div",css:"m2d2-alert-back",style:{position:"absolute",left:0,right:0,top:0,bottom:0,backgroundColor:"#0005",display:"flex",justifyContent:"center",alignItems:"center"},front:{tagName:"form",css:(c.css||[]).concat(["m2d2-alert-front","popup",c.icon],a(c.icon)),style:{zIndex:100},message:{tagName:"div",css:"m2d2-alert-title",span:c.title},submsg:(()=>{let e;return e="input"!==c.icon||c.text?t.isPlainObject(c.text)?{fieldset:Object.assign({css:"m2d2-alert-field"},c.text)}:{span:c.text.replace("\n","<br>")}:{fieldset:{css:"m2d2-alert-field",input:{type:"text",name:"answer",onload:function(){this.focus()}}}},Object.assign({tagName:"div",css:"m2d2-alert-text"},e)})(c.icon),onsubmit:function(){const t=this.getData();let a;switch(t.button){case"ok":case"yes":a=()=>{c.callback(!0,t)};break;case"no":a=()=>{c.callback(!1,t)};break;case"cancel":a=()=>{c.callback(null,t)};break;case"send":a=1===Object.keys(t).length?()=>{c.callback(t[Object.keys(t)[0]],t)}:2===Object.keys(t).length?()=>{c.callback(t[Object.keys(t).find(t=>"button"!==t)],t)}:()=>{c.callback(t,t)};break;default:a=()=>{c.callback(t,t)}}return e(a),!1},onload:function(){const t=this.find("[autofocus]");t&&t.focus()}}}}}),c.buttons.length){const e={buttons:{tagName:"div",css:"m2d2-alert-buttons"}};c.buttons.forEach(a=>{const c=a.toLowerCase().replace(/[^a-z ]/g,"").replace(" ","_");e.buttons[a]={tagName:"button",type:"submit",value:c,css:["color",c],text:void 0!==t.dict?t.dict(a):a,autofocus:["ok","yes"].includes(a),formNoValidate:["cancel"].includes(a),onclick:function(){t(this.closest("form"),{hide:{tagName:"input",type:"hidden",name:"button",value:this.value}})}}}),t("#m2d2-alert .m2d2-alert-front",e)}let l=1;return t("#m2d2-alert .m2d2-alert-front").findAll("input, select, textarea").forEach(t=>{""===t.name&&(t.name="field_"+l++)}),{close:e}},t.wait=(e,a,c)=>t.message({icon:"wait",title:e,buttons:[],text:void 0===c?null:a,callback:void 0===c?a:c}),t.alert=(e,a,c)=>t.message({icon:"info",title:e,buttons:["ok"],text:void 0===c?null:a,callback:void 0===c?a:c}),t.success=(e,a,c)=>t.message({icon:"ok",title:e+" !",buttons:["ok"],text:void 0===c?null:a,callback:void 0===c?a:c}),t.failure=(e,a,c)=>t.message({icon:"error",title:e+" !",buttons:["ok"],text:void 0===c?null:a,callback:void 0===c?a:c}),t.confirm=(e,a,c)=>t.message({icon:"question",title:e+" ?",buttons:["yes","no"],text:void 0===c?null:a,callback:void 0===c?a:c}),t.prompt=(e,a,c)=>t.message({icon:"input",title:e,buttons:["cancel","send"],text:void 0===c?null:a,callback:void 0===c?a:c})});