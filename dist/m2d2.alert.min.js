/**
 * Author : A.Lepe (dev@alepe.com) - intellisrc.com
 * License: MIT
 * Version: 2.1.7
 * Updated: 2024-02-19
 * Content: Extension
 */

m2d2.load((t=>{function e(e){if(t.exists("#m2d2-alert .m2d2-alert-front")){t("#m2d2-alert .m2d2-alert-front").css.add("vanish"),setTimeout((()=>{t.exists("#m2d2-alert .m2d2-alert-front")&&t("#m2d2-alert").remove(),e&&e()}),400)}else e&&e()}const a={wrap:!1,question:["fa","fa-question-circle"],info:["fa","fa-exclamation-circle"],error:["fa","fa-exclamation-triangle"],ok:["fa","fa-check"],input:["fa","fa-edit"],wait:["fa","fa-cog","fa-spin"]},s={wrap:"material-symbols-outlined",question:"help",info:"info",error:"error",ok:"done",input:"edit",wait:"pending"},c={wrap:!1,question:"icon_question",info:"icon_info",error:"icon_error",ok:"icon_ok",input:"icon_input",wait:"icon_wait"};t.message=function(n){let o=c;switch(t.messageIcons){case"fa":o=a;break;case"material":o=s;break;default:t.isObject(t.messageIcons)&&(o=t.messageIcons)}n&&(t.isFunction(n.callback)||(n.callback&&!n.text&&(n.text=n.callback),n.callback=()=>{}),n.text||(n.text="")),e((()=>{t("body",{m2d2Alert:{tagName:"div",id:"m2d2-alert",back:{tagName:"div",css:"m2d2-alert-back",style:{position:"absolute",left:0,right:0,top:0,bottom:0,backgroundColor:"#0005",display:"flex",justifyContent:"center",alignItems:"center"},front:Object.assign({tagName:"form",css:(n.css?t.isArray(n.css)?n.css:[n.css]:[]).concat(["m2d2-alert-front","popup"]),style:{zIndex:100},icon:{tagName:"span",css:["m2d2-icon"].concat(o.wrap?o.wrap:o[n.icon]).concat("wait"===n.icon?"spin":""),text:o.wrap?o[n.icon]:""},message:{tagName:"div",css:"m2d2-alert-title",span:n.title},submsg:(()=>{let e;return e="input"!==n.icon||n.text?t.isPlainObject(n.text)?{fieldset:Object.assign({css:"m2d2-alert-field"},n.text)}:{span:n.text.replace("\n","<br>")}:{fieldset:{css:"m2d2-alert-field",input:{type:"text",name:"answer",css:"input",onload:function(){this.focus()}}}},Object.assign({tagName:"div",css:"m2d2-alert-text"},e)})(n.icon),onsubmit:function(){const t=this.getData();let a;switch(t.button){case"ok":case"yes":a=()=>{n.callback(!0,t)};break;case"no":a=()=>{n.callback(!1,t)};break;case"cancel":a=()=>{n.callback(null,t)};break;case"send":a=1===Object.keys(t).length?()=>{n.callback(t[Object.keys(t)[0]],t)}:2===Object.keys(t).length?()=>{n.callback(t[Object.keys(t).find((t=>"button"!==t))],t)}:()=>{n.callback(t,t)};break;default:a=()=>{n.callback(t,t)}}return e(a),!1},onload:function(){const t=this.find("[autofocus]");t&&t.focus()}},function(e){let a={};return e.length&&(a={buttons:{tagName:"div",css:"m2d2-alert-buttons"}},e.forEach((e=>{const s=e.toLowerCase().replace(/[^a-z ]/g,"").replace(" ","_");a.buttons[s]={tagName:"button",type:"submit",value:s,css:["color",s],text:void 0!==t.dict?t.dict(e):e,autofocus:["ok","yes"].includes(e),formNoValidate:["cancel"].includes(e),onclick:function(){t(this.closest("form"),{hide:{tagName:"input",type:"hidden",name:"button",value:this.value}})}}}))),a}(n.buttons))}}})}));let i=1;return t("#m2d2-alert .m2d2-alert-front").findAll("input, select, textarea").forEach((t=>{""===t.name&&(t.name="field_"+i++)})),{close:e}},t.wait=(e,a,s)=>t.message({css:"wait",icon:"wait",title:e,buttons:[],text:void 0===s?null:a,callback:void 0===s?a:s}),t.alert=(e,a,s)=>t.message({css:"alert",icon:"info",title:e,buttons:["ok"],text:void 0===s?null:a,callback:void 0===s?a:s}),t.success=(e,a,s)=>t.message({css:"success",icon:"ok",title:e,buttons:["ok"],text:void 0===s?null:a,callback:void 0===s?a:s}),t.failure=(e,a,s)=>t.message({css:"failure",icon:"error",title:e,buttons:["ok"],text:void 0===s?null:a,callback:void 0===s?a:s}),t.confirm=(e,a,s)=>t.message({css:"confirm",icon:"question",title:e,buttons:["yes","no"],text:void 0===s?null:a,callback:void 0===s?a:s}),t.prompt=(e,a,s)=>t.message({css:"prompt",icon:"input",title:e,buttons:["cancel","send"],text:void 0===s?null:a,callback:void 0===s?a:s}),t.closeAll=()=>{e()}}));
//# sourceMappingURL=m2d2.alert.min.js.map
