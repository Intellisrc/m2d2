<html>
<head>
<title>Demo using Model</title>
<link rel="stylesheet" href="css/style.css" type="text/css" />
<script src="js/jquery.js"></script>
<script src="js/model.src.js" type="text/javascript"></script>
<script type="text/javascript">
var list = [
    {
          id : 1,
          price: 100,
          name : "Doggy Bag",
          style : "color: #713c3c"
    },{
          id : 2,
          price: 200,
          name : "Skateboard",
          style : "color: #3c7141"
    },{
          id    : 5,
          price : 500,
          name  : "Sassy Pants",
          style : "color: #3c3f71"
    }
];
var struc = {
	dt : "Simple is best",
	dd : "Isn't great to be able to have such freedom, flexibility and simplicity?",
	template : "<dt></dt><dd><a></a></dd>",
	a  : {
		href : "http://example.com",
		target: "_blank",
		text : "Visit: example.com"
    }
}
//These variables are set global, so you can play with them:
var title, info, model, func
$(function($) {
	title = new Model({
		root : "h1",
		data : "ModelJS Demo"
	});
    info = new Model({
		root : ".info",
        data : struc
    }).get();
	model = new Model({
        root : "#items",
        data : list
    }).get();
    func = new Model({
        root : "#datetime",
        data : function(callback) {
            //We could retrieve the date from a remote server...
            var date = new Date();
            callback({
                time : { 
                    text : "Now: " + date,
                    datetime : date,
                    title: "Attribute datetime is also changing!"
                }
            }, 1000); //1000: call function each 1sec.
        }
    }).get();
	// Events
	$("#title").keyup(function(){
		title.data = $(this).val();
	});
	$("#link").keyup(function(){
		info.a.text = $(this).val();
	});
	$("#price").keyup(function(){
		model[1].price = $(this).val() * 1;
	});
    $(".add").click(function(){
        model.push({
          id    : Math.round((Math.random() * 1000 / 100)),
          price : Math.round((Math.random() * 100000 / 100)),
          name  : "Extra Item",
          style : "color: #B17E28"
        });
    });
    $(".remove").click(function(){
        model.splice(0, 1);
    });
});
</script>
</head>
<body>
<h1>Title</h1>
<div class="info"></div>
<table id="checkout">
  <caption>My whish list:</caption>
  <tbody id="items">
    <template>
        <tr>
          <td class="id" />
          <td>
            <a class="name"></a>
          </td>
          <td>
            $ <span class="price"></span>
          </td>
        </tr>
    </template>
  </tbody>
</table>
<div id="controls">
    <div><button class="add">Add Row</button><button class="remove">Remove Row</button></div>
    <div>New Title: <input id="title" type="text" /></div>
    <div>New Link: <input id="link" type="text" /></div>
    <div>New Price: <input id="price" type="number" /></div>
</div>
<div id="datetime">
    <time>Time Now</time>
</div>
</body>
</html>
