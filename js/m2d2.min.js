"use strict";var m2d2=(function(){var d=function(l,m){if(m!=undefined){l.onRenderDone=m}return new j(l).get()};d.ext=function(l){j.prototype._ext=f(j.prototype._ext,l)};var j=function(m){var l=this;if(!(l instanceof j)){l=new j(m);return l}else{l=f(l,m||{});if(l.auto_init){l.init()}}};j.prototype={root:"body",auto_init:true,html:true,data:{},interval:0,preRender:function(l){},beforeDataRender:function(l,m,n){},afterDataRender:function(l,m,n){},postRender:function(l){},onRenderDone:function(l){},rendered:false,$root:null,init:function(){var l=this;if(b(l._data)){l._func=l._data;l._data=e(l._data)?[]:{};l._doFunc(l._func,l.param,function(n,m){l._onReady();if(m===undefined){if(l.interval*1>0){m=l.interval}}if(m*1>0){l.interval=setInterval(function(){l._func(function(o){l._doRender(l.$root,o)})},m)}})}else{if(!k(this._data)){this._data={text:this._data}}l._onReady()}},update:function(n,m,l){var p=this;if(p.rendered){var o=function(q){if(q._node!=undefined){var r={};r[m]=l.value;p._doRender(q._node,f(q,r))}else{p.clear();p._doRender(p.$root,q)}};if(m===undefined&&b(p._func)){p._doFunc(p._func,n,function(q){o(q)})}else{o(n)}}},render:function(){var l=this;l.preRender(l);l._doRender(l.$root,l._data);l.postRender(l);l.rendered=true;l.onRenderDone(l.get())},get:function(){var l=this;l._defineProp(l._data,"m2d2",this);l._setProxy();return this._data},clear:function(){var l=this;if(l.rendered){l.$root.innerHTML=l.cache}},_cache:null,_data:null,_func:null,_ext:{},_htmlGenTags:["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","datalist","dd","del","details","dfn","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","map","mark","menu","meter","nav","ol","optgroup","option","output","p","pre","progress","q","rp","rt","ruby","samp","section","select","small","span","strong","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","tr","tt","ul","var"],_onReady:function(l){var l=this;l.$root=c(l.root);l.cache=l.$root.innerHTML;l.render()},_doFunc:function(l,m,o){var n=this;l(function(q,p){if(k(q)){if(e(q)&&i(n._data)){n._data=q}else{for(var r in q){n._data[r]=q[r]}}}if(o!=undefined){o(q,p)}},m)},_setProxy:function(){var l=this;if(l._data._proxy===undefined&&(i(l._data)||e(l._data))){l._data=l._proxy(l._data,function(o,m,n){if(m!="m2d2"&&m[0]!="_"){l.update(o,m,n)}})}},_doRender:function(l,m){var n=this;n._setProxy();if(e(m)){n._doArray(l,n,m)}else{n._setValues(l,m)}},_doArray:function(n,q,m){var r=this;var p=r._getTemplate(n,q);if(p){for(var o=0;o<m.length;o++){if(m[o]._node!=undefined){m[o]._node=undefined}var l=g(p);l.setAttribute("data-id",o);n.append(l);r._setValues(l,m[o])}}else{console.log("No template found to apply array:");console.log(q)}},_getTemplate:function(l,o){var p=this;if(o._template!=undefined){return o._template}else{var m;if(o.template!=undefined){if(i(o.template)){m=h("div");p._setValues(m,o.template)}else{m=g("<div>"+o.template+"</div>")}}else{m=c("template",l)}if(m){var n=m.innerHTML.trim();p._defineProp(o,"_template",n);return n}else{return l.innerHTML.trim()}}},_setValues:function(l,p){var r=this;if(i(p)){r._setNode(l,p);if(p.data!=undefined){r._doArray(l,p,p.data);return}if(p.template!=undefined){l.innerHTML=r._getTemplate(l,p)}for(var o in p){if(["template","data"].indexOf(o)==-1){if(r._ext[o]!=undefined&&b(r._ext[o])){var n=r._ext[o](p[o],l);if(n){r._setValues(l,n)}}else{if(o[0]=="#"){r._doRender(c(o),p[o])}else{if(o=="text"||o=="html"){r._setValue(l,o,p[o])}else{if(o.indexOf("on")==0&&b(p[o])){l[o]=function(s){return p[o](s)}}else{if(p[o] instanceof Date){r._setValue(l,o,p[o])}else{if(r._hasAttr(l,o)&&!(o=="id"&&a(p[o]))){l.setAttribute(o,p[o])}else{var q=c(o,l);if(!q){q=c("."+o,l);if(!q){if(r._htmlGenTags.indexOf(o)!=-1){var m=h(o);l.append(m);r._doRender(m,p[o])}else{if(!a(o)){l.setAttribute(o,p[o])}}continue}}r._doRender(q,p[o])}}}}}}}}}else{r._setValue(l,null,p)}},_setValue:function(l,n,p){var r=this;var o=false;if(n==null){if(i(p)&&p.text!==undefined){p=p.text}else{if(!a(p)&&p.trim().indexOf("<")!==-1){o=true}}}else{if(n=="html"){o=true}}if(o){l.innerHTML=p}else{if(n=="value"||(n==null&&r._hasAttr(l,"value")&&(l.tagName!="LI"))){if(r._hasAttr(l,"checked")){if(p==true||p=="true"||p==1){l.setAttribute("checked",true)}else{if(p==false||p=="false"||p==0){l.setAttribute("checked",false)}else{l.value=p}}}else{if(p instanceof Date){l.valueAsDate=p}else{l.value=p}}}else{if(l.childElementCount>0){for(var m in l.childNodes){var q=l.childNodes[m];if(q.nodeType==3){q.replaceWith(p);return}}l.innerHTML=l.innerHTML+p}else{l.innerText=p}}}},_hasAttr:function(m,l){var n=false;if(m&&!a(l)){switch(l){case"checked":n=(m.type!=undefined&&(m.type=="radio"||m.type=="checkbox"));break;default:n=m[l]!=undefined||m.hasAttribute(l)}}return n},_defineProp:function(m,n,l){if(k(m)){if(m[n]===undefined){Object.defineProperty(m,n,{enumerable:false,writable:true});m[n]=l}}},_setNode:function(l,m){this._defineProp(m,"_node",l)},_proxy:function(n,l){this._defineProp(n,"_proxy",true);var m={get:function(r,q,p){if(q=="m2d2"||q[0]=="_"){return r[q]}else{try{if(e(n)&&!a(q)){return r[q]}else{return new Proxy(r[q],m)}}catch(o){return Reflect.get(r,q,p)}}},defineProperty:function(q,o,p){l(q,o,p);return Reflect.defineProperty(q,o,p)},deleteProperty:function(p,o){l(p,o);return Reflect.deleteProperty(p,o)},set:function(q,p,o){q[p]=o;l(q,p,{value:o});return true}};return new Proxy(n,m)},set data(l){var m=this;m._data=l;m.update(m._data)},get data(){var l=this;return l._data}};function f(){for(var m=1;m<arguments.length;m++){for(var l in arguments[m]){if(arguments[m].hasOwnProperty(l)){arguments[0][l]=arguments[m][l]}}}return arguments[0]}var b=function(l){return typeof l==="function"};var e=function(l){return Array.isArray(l)};var k=function(l){return typeof l==="object"};var i=function(l){return k(l)&&!e(l)};var a=function(l){return !isNaN(parseFloat(l))&&isFinite(l)};var c=function(l,m){if(m===undefined){m=document}return m.querySelector(l)};var h=function(l){return document.createElement(l)};var g=function(l){var m=h("template");m.innerHTML=l.trim();return m.content.firstChild};return d})();