"use strict";const m2d2=function(){const e=function(e){const n=t("template");return n.innerHTML=e.trim(),n.content.firstChild},t=function(e){return document.createElement(e)},n=function(e,t){return void 0===t&&(t=document),e instanceof Node?e:t.querySelector(e)},o=function(e){return!isNaN(parseFloat(e))&&isFinite(e)},i=function(e){return 0===(e+"").trim().indexOf("#")},r=function(e){return a(e)&&!s(e)},a=function(e){return"object"==typeof e},s=function(e){return Array.isArray(e)},l=function(e){return"function"==typeof e},d=function(e){return-1!==(e+"").trim().indexOf("<")},c=function(e){let t=this;if(!(t instanceof c))return t=new c(e),t;t=_(t,e||{}),t._init()};let u=!0;const f=function(e,t,n){const o={},i=typeof e;switch(i){case"string":if(void 0===t)return o.data=e,null;o.root=e,s(t)&&(t={items:t}),o.data=t,o.template=n;break;case"object":e instanceof Node&&(o.root=e,e=t);case"function":s(e)&&(t={items:e}),o.data=e,o.template=n;break;default:return console.log("First argument passed to m2d2, with value: ("+e+") is of unknown type: "+i),null}return new c(o).get()};function _(){for(let e=1;e<arguments.length;e++)for(let t in arguments[e])arguments[e].hasOwnProperty(t)&&(arguments[0][t]=arguments[e][t]);return arguments[0]}return f.ext=function(e){c.prototype._ext=_(c.prototype._ext,e)},c.prototype={root:"body",$root:null,update:function(e,t,n){const o=this;if(o._rendered){const i=function(e){let i;if(void 0!==e._node)if(s(e))if(void 0===n)void 0!==e[t]._node&&e[t]._node.remove();else{let t;const n=[];for(t in e._node.childNodes)i=e._node.childNodes[t],void 0!==i.tagName&&"TEMPLATE"!==i.tagName&&n.push(i);for(t in n)i=n[t],i.remove();o._doRender(e._node,e)}else{const i={};i[t]=n.value,o._doRender(e._node,_(e,i))}else o.clear(),o._doRender(o.$root,e)};void 0===t&&l(o._func)?o._doFunc(o._func,e,(function(e){i(e)})):i(e)}},get:function(){return this._defineProp(this._data,"m2d2",this),this._setProxy(),this._data},clear:function(){const e=this;e._rendered&&(e.$root.innerHTML=e.cache)},_rendered:!1,_init:function(){const e=this;if(l(e._data)){e._func=e._data;let t=e._doFunc(e._func,e.param);t&&(s(t)&&(t={items:t}),e._data=t,e._onReady())}else a(e._data)||(e._data={text:e._data}),e._onReady()},_render:function(){const e=this;if(void 0===e._data)return console.log("data is missing in m2d2 object with root: "+e.root),!1;e._doRender(e.$root,e._data),e._rendered=!0},_cache:null,_data:null,_func:null,_ext:{},_htmlGenTags:["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","datalist","dd","del","details","dfn","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","map","mark","menu","meter","nav","ol","optgroup","option","output","p","pre","progress","q","rp","rt","ruby","samp","section","select","small","span","strong","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","tr","tt","ul","var"],_onReady:function(){this.$root=n(this.root),this.cache=this.$root.innerHTML,this._render()},_doFunc:function(e,t,n){const i=this;let l=e((function(e,t,a){let l;if(void 0!==a&&o(a)?l=a:void 0!==t&&o(t)&&(l=t),s(e)){const n={};void 0===t||o(t)?void 0!==i.template&&(n.template=i.template):n.template=t,n.items=e,e=n}if(r(e)){u=!1;let t=1;for(let n in e)t++===Object.keys(e).length&&(u=!0),i._data[n]=e[n]}void 0===l&&1*i.interval>0&&(l=i.interval),1*l>0&&(i.interval=setInterval((function(){i._func((function(e){i._doRender(i.$root,e)}))}),l)),void 0!==n&&n(e)}),t)||{items:[]};return s(l)&&(l={items:l}),a(l)||console.log("Undefined type of 'data'. For automatic detection do not set any 'return' in the data's function. Or explicitly return '[]' for arrays or '{}' for objects."),l},_setProxy:function(){const e=this;void 0===e._data._proxy&&(r(e._data)||s(e._data))&&(e._data=e._proxy(e._data,(function(t,n,o){"m2d2"!==n&&"_"!==n[0]&&u&&e.update(t,n,o)})))},_doRender:function(e,t){t&&void 0!==t.oninit&&l(t.oninit)&&(t.oninit(),delete t.oninit),this._setProxy(),s(t)&&(t={items:t}),t&&a(t)&&void 0===t.items&&(t.items=[]),this._setValues(e,t),t&&void 0!==t.onrender&&l(t.onrender)&&(t.onrender(),delete t.onrender)},_doArray:function(n,o,a){const s=this;s._setNode(n,a);let l=s._getTemplate(n,o);for(let d=0;d<a.length;d++){const c=a[d];if(void 0!==c._node&&(c._node=void 0),!l){if(!r(c))return console.log("Warning: No template found for object:"),void console.log(o);if(1!==Object.keys(c).length)return console.log("Warning: Multiple keys in data without template is not supported yet. Object:"),void console.log(o);if(i(c)){const e=document.querySelector(c);if(!e)return console.log("Warning: ID selector for template not found: "+c+" . Object:"),void console.log(o);l=e.outerHTML}else l=t(Object.keys(c)[0]).outerHTML}const u=e(l);u.setAttribute("data-id",d),n.append(u),s._setValues(u,c)}},_getTemplate:function(o,a){const s=this;if(void 0!==a._template&&""!==a._template)return a._template;{let l;if(void 0!==a.template?r(a.template)?(l=t("div"),s._setValues(l,a.template)):l=i(a.template)?document.querySelector(a.template):d(a.template)?e("<template>"+a.template+"</template>"):e("<template>"+t(a.template).outerHTML+"</template>"):l=n("template",o),l){const e=l.innerHTML.trim();return s._defineProp(a,"_template",e),e}return o.innerHTML.trim()}},_setValues:function(i,a){const d=this;if(s(a)&&(a={items:a}),r(a)){d._setNode(i,a);for(let c in a){const u=a[c];if("items"===c&&s(u))d._doArray(i,a,u);else if("template"===c)i.append(e("<template>"+d._getTemplate(i,a)+"</template>"));else if("items"!==c||s(u)||(console.log("Warning: 'items' specified but value is not and array in element: "),console.log(i),console.log("Passed values are: "),console.log(u)),void 0!==d._ext[c]&&l(d._ext[c])){const e=d._ext[c](u,i);e&&d._setValues(i,e)}else if("#"===c[0])d._doRender(n(c),u);else if("text"===c||"html"===c)d._setValue(i,c,u);else if("dataset"===c&&r(u))for(let e in u)i.setAttribute("data-"+e,u[e]);else if("style"===c)if(r(u))for(const e in u)i.style[e]=u[e];else i.style=u;else if(0===c.indexOf("on")&&l(u))i[c]=u;else if(u instanceof Date)d._setValue(i,c,u);else if(!d._hasAttr(i,c)||"id"===c&&o(u)){let e=n(c,i);if(!e&&(e=n("#"+c,i),e||(e=n("."+c,i)),!e)){if(-1!==d._htmlGenTags.indexOf(c)){const e=t(c);i.append(e),d._doRender(e,u)}else o(c)||i.setAttribute(c,u);continue}d._doRender(e,u)}else"boolean"==typeof i[c]?i[c]=u:i.setAttribute(c,u)}}else d._setValue(i,null,a)},_setValue:function(e,t,n){const i=this;let a=!1;if(null==t?void 0===n||null==n?(console.log("Value was undefined in element :"),console.log(e)):r(n)&&void 0!==n.text?n=n.text:!o(n)&&d(n)&&(a=!0):"html"===t&&(a=!0),a)e.innerHTML=n;else if("value"===t||null==t&&i._hasAttr(e,"value")&&"LI"!==e.tagName)i._hasAttr(e,"checked")?!0===n||"true"===n||1===n?e.setAttribute("checked",!0):!1===n||"false"===n||0===n?e.setAttribute("checked",!1):e.value=n:n instanceof Date?e.valueAsDate=n:e.value=n;else if(e.childElementCount>0){for(let t in e.childNodes){const o=e.childNodes[t];if(3===o.nodeType)return void o.replaceWith(n)}e.innerHTML=e.innerHTML+n}else e.innerText=n},_hasAttr:function(e,t){let n=!1;if(e&&!o(t))switch(t){case"checked":n=void 0!==e.type&&("radio"===e.type||"checkbox"===e.type);break;default:n=void 0!==e[t]||e.hasAttribute(t)}return n},_defineProp:function(e,t,n){a(e)&&void 0===e[t]&&(Object.defineProperty(e,t,{enumerable:!1,writable:!0}),e[t]=n)},_setNode:function(e,t){this._defineProp(t,"_node",e)},_proxy:function(e,t){this._defineProp(e,"_proxy",!0);const n={get:function(t,i,r){if("m2d2"===i||"_"===i[0])return t[i];{const a=Reflect.get(t,i,r),l=Object.getOwnPropertyDescriptor(t,i);if(l&&!l.writable&&!l.configurable)return a;try{return s(e)&&!o(i)?t[i]:new Proxy(t[i],n)}catch(e){return a}}},defineProperty:function(e,n,o){return t(e,n,o),Reflect.defineProperty(e,n,o)},deleteProperty:function(e,n){return t(e,n),Reflect.deleteProperty(e,n)},set:function(e,n,o){return e[n]=o,t(e,n,{value:o}),!0}};return new Proxy(e,n)},set data(e){this._data=e,this.update(this._data)},get data(){return this._data}},f}();
m2d2.ext({show:function(e,t){var a=function(){return getComputedStyle(t,null).display};if(e)"none"==a()&&(t.dataset._m2d2_display?t.style.display=t.dataset._m2d2_display:(t.style.removeProperty("display"),"none"==a()&&(t.style.display=t.dataset.display||a()||function(){var e=document.getElementsByTagName("body")[0],a=document.createElement("template"),l=document.createElement(t.tagName);a.appendChild(l),e.appendChild(a);var d=getComputedStyle(l,null).display;return a.remove(),d}())));else{var l="none"!=t.style.display?t.style.display:a();"none"!=l&&(t.dataset._m2d2_display=l),t.style.display="none"}}});
m2d2.ext({color:function(s,c){c.style.color=s},bgcolor:function(s,c){c.style.backgroundColor=s},css:function(s){return{class:s}},"-css":function(s,c){c.classList.remove(s)},"+css":function(s,c){c.classList.add(s)}});